<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="template.xhtml">
	<ui:define name="title">
		<h:outputText value="#{msg.edit_of} #{msg.menu_items}" />
	</ui:define>		
	<ui:define name="content">
	<div class="block">
		<div class="block-header">			
			<h3 class="block-title"><h:outputText value="Bienvenido #{loginMb.currentUser.userName}" /></h3>
		</div>	
		<div class="block-content">
			<table class="table table-bordered table-striped">
					<thead>
						<tr>
							<th class="text-center" style="width: 15%;">Fecha</th>
							<th class="text-center" style="width: 15%;">Usuario</th>
							<th>Contenido</th>							
						</tr>
					</thead>
					<tbody>
						<ui:repeat var="p" value="#{postMb.posts}">
							<tr>								
								<td class="text-center">#{p.date}</td>
								<td class="text-center">
									<span class="label label-info">#{p.user.userName}</span>								
								</td>
								<td class="font-w600">#{p.content}</td>
							</tr>
						</ui:repeat>
					</tbody>
			</table>	
		</div>
	</div>	
	<div class="block">
		<div class="block-header">
			<h3 class="block-title">Nuevo post</h3>
		</div>	
		<h:form styleClass="form-inline">
			<h:panelGroup layout="block" rendered="#{!loginMb.logged}">
				<h:outputText value="Inicia sesion para agregar nuevos posts." />
			</h:panelGroup>
			<h:panelGroup layout="block" rendered="#{loginMb.logged}">
				<h:inputText styleClass="form-control" value="#{postMb.content}"/>
				<h:commandLink action="#{postMb.add()}" styleClass="btn btn-danger">Enviar</h:commandLink>		
			</h:panelGroup>
			<h:messages globalOnly="true" errorClass="alert alert-danger"/>
		</h:form>				
	</div>				
	</ui:define>
</ui:composition>
</html>